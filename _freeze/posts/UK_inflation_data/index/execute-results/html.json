{
  "hash": "1cfba26e86798cf319502e471cbbfa30",
  "result": {
    "markdown": "---\ntitle: \"UK CPIH Inflation Data\"\nauthor: \"Ravi Verma\"\ndate: \"2022-12-13\"\ncategories: [python, UK, inflation]\n---\n\n\nLet's install the package DBnomics which contains a plethora of macroeconomic data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"rdbnomics\")\nlibrary(rdbnomics)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'rdbnomics' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nVisit <https://db.nomics.world>.\n```\n:::\n:::\n\n\nWe're interested in using the official inflation data by the Office for National Statistics which is the official provider of UK economic statistics.\n\nSpecifically we want CPIH data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_CPIH_monthly <- rdb(ids = \"ONS/MM23/L55O.M\")\n```\n:::\n\n\nAs we're doing the plotting in Python we want to attach the dataset so we can interact with Python and use specific plotting packages with respect to Python.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nattach(df_CPIH_monthly)\n```\n:::\n\n\nLittle bit of code to install pandas so we can use later on.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# library(reticulate)\n# conda_install(\"r-reticulate\", \"pandas\")\n```\n:::\n\n\nChecking with Python code that we can use the CPIH data we recently downloaded earlier.\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport pandas\ncpih_test =r.df_CPIH_monthly\nprint(cpih_test.head(5))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  @frequency dataset_code  ...                                    Title value\n0    monthly         MM23  ...  CPIH ANNUAL RATE 00: ALL ITEMS 2015=100   NaN\n1    monthly         MM23  ...  CPIH ANNUAL RATE 00: ALL ITEMS 2015=100   NaN\n2    monthly         MM23  ...  CPIH ANNUAL RATE 00: ALL ITEMS 2015=100   NaN\n3    monthly         MM23  ...  CPIH ANNUAL RATE 00: ALL ITEMS 2015=100   NaN\n4    monthly         MM23  ...  CPIH ANNUAL RATE 00: ALL ITEMS 2015=100   NaN\n\n[5 rows x 15 columns]\n```\n:::\n:::\n\n\nPlotting the CPIH data in Python using Matplotlib.\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport matplotlib.ticker as ticker\nimport matplotlib.dates as mdates\nimport datetime as dt\n\ndf_CPIH_monthly = r.df_CPIH_monthly\ndf_CPIH_monthly['value_percentage'] = df_CPIH_monthly['value'] / 100\n\nfig, ax = plt.subplots()\nax.plot(df_CPIH_monthly['period'], df_CPIH_monthly['value_percentage'])\nax.set_title(\"UK CPIH Inflation: 12 months to October 2022\")\nax.set_ylabel(\"Inflation Rate\")\nax.set_xlabel(\"Date\")\nax.yaxis.set_major_formatter(ticker.PercentFormatter(1))\nax.annotate(text='Data Source: DBnomics, Graphic by Ravi Verma',\n            xy=(0, 0),\n            xytext=(-60, -40),\n            fontsize=9,\n            xycoords='axes fraction',\n            textcoords='offset points')\nax.annotate(text='Latest inflation is 9.6%',\n            xy=(mdates.date2num(dt.datetime(2022, 10, 0o1)), 0.096),\n            xytext=(-120, -10),\n            fontsize=10,\n            xycoords='data',\n            textcoords='offset points',\n            wrap=True)\nplt.tight_layout()\nplt.show()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}