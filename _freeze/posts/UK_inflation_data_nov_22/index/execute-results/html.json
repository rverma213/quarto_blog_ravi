{
  "hash": "12cf638a7c3861507a924aa184af1108",
  "result": {
    "markdown": "---\ntitle: \"UK CPI Inflation November 2022\"\nauthor: \"Ravi Verma\"\ndate: \"2022-12-15\"\ncategories: [R, UK, inflation]\nexecute:\n  warning: false\nformat:\n  html:\n    code-fold: true\n    code-summary: \"Show the code\"\n---\n\n\nThe latest UK CPI figures were released for November 2022\n\n\n::: {.cell}\n\n:::\n\n::: {.cell .fig-column-page-right}\n\n```{.r .cell-code}\n# plot 1\nggplot(df_overall_inflation, aes(period, value/100)) +\n  geom_line(lwd=1, colour=\"darkblue\") +\n  labs(x = \"Date\",\n       y='Inflation Rate (%)',\n       title = \"UK CPI Inflation: 12 months to November 2022\",\n       caption = \"Data Source: ONS, DBnomics. Graphic by @Ravi Verma\") +\n  geom_text_repel(aes(label = sprintf(\"The latest CPI reading is %s%%\", data_ends$value), fontface='bold'), data = data_ends) +\n  scale_y_continuous(labels = scales::label_percent(accuracy=0.1), breaks = seq(0,0.12, by=0.02)) + \n  theme(panel.grid.major = element_blank(),\n        panel.grid.minor = element_blank(),\n        panel.background = element_blank(),\n        axis.line = element_line(size = 1.5, colour = \"black\"),\n        axis.text.x = element_text(size = 15, colour = \"black\"),\n        axis.text.y = element_text(size = 15, colour = \"black\"),\n        axis.title.x = element_text(size = 15, colour = \"black\"),\n        axis.title.y = element_text(size = 15, colour = \"black\")) +\n  geom_hline(yintercept=0.02, linetype=\"dashed\", color = \"black\", size=2) +\n  geom_text(aes(x=as.Date(\"1991-05-01\", \"%Y-%m-%d\"), y=0.02, label = \"BoE Target is 2%\", vjust = 0), nudge_y = -0.009, check_overlap = TRUE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nAssessing inflation by breaking it down into Goods and Services.\n\n\n::: {.cell}\n\n:::\n\n::: {.cell .fig-column-page-right}\n\n```{.r .cell-code}\n# plot 2\np <- ggplot(df_goods_services, aes(period, value/100, colour=stat_type)) + geom_line(lwd=1) \np + labs(x = \"Date\",\n       y='Inflation Rate (%)',\n       title = \"UK CPI Inflation: 12 months to November 2022\",\n       caption = \"Data Source: ONS, DBnomics. Graphic by @Ravi Verma\") +\n  scale_y_continuous(labels = scales::label_percent(accuracy=0.1), breaks = seq(0,0.16, by=0.02)) + \n  theme(panel.grid.major = element_blank(),\n        panel.grid.minor = element_blank(),\n        panel.background = element_blank(),\n        axis.line = element_line(size = 1.5, colour = \"black\"),\n        axis.text.x = element_text(size = 15, colour = \"black\"),\n        axis.text.y = element_text(size = 15, colour = \"black\"),\n        axis.title.x = element_text(size = 15, colour = \"black\"),\n        axis.title.y = element_text(size = 15, colour = \"black\"),\n        legend.position = \"none\") +\n  geom_hline(yintercept=0.02, linetype=\"dashed\", color = \"black\", size=2) +\n  geom_text(aes(x=as.Date(\"1991-05-01\", \"%Y-%m-%d\"), y=0.02, label = \"BoE Target is 2%\", vjust = 0), nudge_y = -0.02, check_overlap = TRUE) +\n  geom_text(data = filter(df_goods_services, period == max(period)),aes(label = stat_type, x=as.Date(\"2018-01-01\", \"%Y-%m-%d\")),hjust = 0, nudge_x = -0.5, check_overlap = TRUE) +\ncoord_cartesian(clip = 'off') \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nDecomposing CPI inflation into various sectors to see which contribute the highest to inflation.\n\n\n::: {.cell}\n\n:::\n\n::: {.cell .fig-column-page-right}\n\n```{.r .cell-code}\n# plot 3\np <- ggplot(df, aes(period, value/100, colour=sector)) + geom_line(lwd=1) + scale_color_viridis(discrete = TRUE) \np + labs(x = \"Date\",\n         y='Inflation Rate (%)',\n         title = \"UK CPI Inflation: 12 months to November 2022 - Sectors\",\n         caption = \"Data Source: ONS, DBnomics. Graphic by @Ravi Verma\") +\n  theme(panel.grid.major = element_blank(),\n        panel.grid.minor = element_blank(),\n        panel.background = element_blank(),\n        axis.line = element_line(size = 1.5, colour = \"black\"),\n        axis.text.x = element_text(size = 15, colour = \"black\"),\n        axis.text.y = element_text(size = 15, colour = \"black\"),\n        axis.title.x = element_text(size = 15, colour = \"black\"),\n        axis.title.y = element_text(size = 15, colour = \"black\"),\n        legend.position = \"none\",\n        plot.margin = margin(0.1, 2.6, 0.1, 0.1, \"cm\")) +\n  scale_y_continuous(labels = label_percent(accuracy = 0.1)) +\n  geom_text(data = filter(df, period == max(period)),\n            aes(label = sector),\n            hjust = 0, nudge_x = 0.5, check_overlap = TRUE, size=2) +\n  coord_cartesian(clip = 'off') \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nAnalyse inflation by sector looking at the time series of each sector individually.\n\n\n::: {.cell .fig-column-page-right}\n\n```{.r .cell-code}\n# plot 4\nggplot(df, aes(period, value/100)) +\n  geom_line(lwd=1) +\n  facet_wrap(vars(sector), nrow = 4) +\n  theme(strip.background = element_blank(),\n        strip.placement = \"outside\",\n        panel.background = element_rect(fill = NA),\n        axis.line = element_line()) +\n  scale_y_continuous(labels = label_percent(accuracy = 0.1)) +\n  labs(x = \"Date\",\n       y='Contribution to Inflation Rate (%)',\n       title = \"UK CPI Inflation: Sector Contributions\", \n       caption = \"Data Source: ONS, DBnomics. Graphic by @Ravi Verma\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nWhat if we create a similar graph but change the y axis for each chart such that it is relative to each other.\n\n\n::: {.cell .fig-column-page-right}\n\n```{.r .cell-code}\n# plot 5 - relative scales\nggplot(df, aes(period, value/100)) +\n  geom_line(lwd=1) +\n  facet_wrap(vars(sector), scales = \"free_y\", nrow = 4) +\n  theme(strip.background = element_blank(),\n        strip.placement = \"outside\",\n        panel.background = element_rect(fill = NA),\n        axis.line = element_line()) +\n  scale_y_continuous(labels = label_percent(accuracy = 0.1)) +\n  labs(x = \"Date\",\n       y='Contribution to Inflation Rate (%)',\n       title = \"UK CPI Inflation: Sector Contributions\", \n       caption = \"Data Source: ONS, DBnomics. Graphic by @Ravi Verma\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nSpecifically looking at the YoY inflation to November 2022 we can see which sectors contribute to inflation the most.\n\n\n::: {.cell .fig-column-page-right}\n\n```{.r .cell-code}\n# plot 6\nwaterfall(df_latest[,c(\"value\", 'sector')], calc_total = TRUE, total_rect_color = \"#ED7D31\", total_axis_text = \"Total (CPI Inflation)\", \n       fill_colours = rep(c(\"#4472C4\"), 12), fill_by_sign = FALSE) +\nlabs(x = \"Sectors\", y='Contribution to Inflation Rate (%)',\n     title = \"UK CPI Inflation: Sector Contributions\",\n     caption = \"Data Source: ONS, DBnomics. Graphic by @Ravi Verma\") +\ntheme(panel.grid.major = element_blank(),\n      panel.grid.minor = element_blank(),\n      panel.background = element_blank(),\n      axis.line = element_line(size = 1.5, colour = \"black\"),\n      axis.text.x = element_text(size = 8, colour = \"black\", angle = 90),\n      axis.text.y = element_text(size = 10, colour = \"black\"),\n      axis.title.x = element_text(size = 10, colour = \"black\"),\n      axis.title.y = element_text(size = 10, colour = \"black\")) +\nscale_y_continuous(limits = c(0,12) ,labels = label_number(accuracy = 0.01))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}